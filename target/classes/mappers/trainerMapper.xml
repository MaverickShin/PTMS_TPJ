<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="ptms.mvc.tpj.TrainerDAO.TrainerDAO">
	
	<insert id="insertTrainer" parameterType="ptms.mvc.tpj.CustVO.TrainerVO">
		INSERT INTO TRAINER_TB(TA_CD, CUST_ID, TA_TITLE, TA_APPEAL, TA_IMG, TA_ST, TA_DT)
		VALUES(TA_CD_seq.nextval, #{CUST_ID}, #{TA_TITLE}, #{TA_APPEAL}, #{TA_IMG}, 1, sysdate)
	</insert>
	
	<insert id="insertTrainerDetail" parameterType="ptms.mvc.tpj.CustVO.TrainerVO">
		INSERT INTO TRAINER_SERVICE_TB(TS_CD, TA_CD, TS_AREA, TS1_NO, TS1_FEE, TS2_NO, TS2_FEE, TS3_NO, TS3_FEE, TS4_NO, TS4_FEE, START_DAY, END_DAY, ADJUSTABLE)
		VALUES(TS_CD_seq.nextval, TA_CD_seq.currval, #{TS_AREA}, #{TS1_NO}, #{TS1_FEE}, #{TS2_NO}, #{TS2_FEE}, #{TS3_NO}, #{TS3_FEE}, #{TS4_NO}, #{TS4_FEE}, #{START_DAY}, #{END_DAY}, #{ADJUSTABLE})
	</insert>
	
	<!-- 훈련사 상세정보 -->
	<select id="TrainerDetail" parameterType="String" resultType="ptms.mvc.tpj.CustVO.TrainerVO">
		select * 
		from (select t.TA_CD,t.CUST_ID,t.TA_TITLE,t.TA_APPEAL,t.TA_IMG,t.TA_ST,
		            ts.TS_AREA,ts.TS1_NO,ts.TS1_FEE,ts.TS2_NO,ts.TS2_FEE,ts.TS3_NO,ts.TS3_FEE,ts.TS4_NO,ts.TS4_FEE,ts.START_DAY,ts.END_DAY,ts.ADJUSTABLE
		       from TRAINER_TB t ,TRAINER_SERVICE_TB ts
		      where ts.TA_CD = t.TA_CD
		     )
		where CUST_ID = #{CUST_ID}
	</select>
	
	<!-- 훈련사 수정 처리 - 훈련사프로필 update-->
	<update id="updateTrainer1" parameterType="ptms.mvc.tpj.CustVO.TrainerVO">
		update TRAINER_TB
		set TA_TITLE = #{TA_TITLE}, TA_APPEAL = #{TA_APPEAL}, TA_IMG = #{TA_IMG}
		where CUST_ID = #{CUST_ID}
	</update>
	
	<!-- 훈련사 수정 처리 - 훈련사 서비스정보 update-->
	<update id="updateTrainer2" parameterType="ptms.mvc.tpj.CustVO.TrainerVO">
		update TRAINER_SERVICE_TB
		set	TS_AREA = #{TS_AREA}, TS1_NO = #{TS1_NO}, TS1_FEE = #{TS1_FEE}, TS2_NO = #{TS2_NO}, TS2_FEE = #{TS2_FEE}, 
				TS3_NO = #{TS3_NO}, TS3_FEE = #{TS3_FEE}, TS4_NO = #{TS4_NO}, TS4_FEE = #{TS4_FEE}, START_DAY = #{START_DAY}, 
				END_DAY = #{END_DAY}, ADJUSTABLE = #{ADJUSTABLE}
		where TA_CD = #{TA_CD}
	</update>
</mapper>